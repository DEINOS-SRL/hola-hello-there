#!/bin/bash
export SUPABASE_ACCESS_TOKEN=sbp_734a57dd49d399a8f6fba279e01c532de59373d4

echo "Reparando migraciones - marcando como revertidas..."
npx supabase migration repair --status reverted 20251224230545
npx supabase migration repair --status reverted 20251224230627
npx supabase migration repair --status reverted 20251224230632
npx supabase migration repair --status reverted 20251224230635
npx supabase migration repair --status reverted 20251224230638
npx supabase migration repair --status reverted 20251224231106
npx supabase migration repair --status reverted 20251224231129
npx supabase migration repair --status reverted 20251224231134
npx supabase migration repair --status reverted 20251225133434
npx supabase migration repair --status reverted 20251225140849
npx supabase migration repair --status reverted 20251225142034
npx supabase migration repair --status reverted 20251225142355
npx supabase migration repair --status reverted 20251225152912
npx supabase migration repair --status reverted 20251225152936
npx supabase migration repair --status reverted 20251225160150
npx supabase migration repair --status reverted 20251225160618
npx supabase migration repair --status reverted 20251225171621
npx supabase migration repair --status reverted 20251225171822
npx supabase migration repair --status reverted 20251225172637
npx supabase migration repair --status reverted 20251225173612
npx supabase migration repair --status reverted 20251225173844
npx supabase migration repair --status reverted 20251225175633
npx supabase migration repair --status reverted 20251225180956
npx supabase migration repair --status reverted 20251225183110
npx supabase migration repair --status reverted 20251225185115
npx supabase migration repair --status reverted 20251225193140
npx supabase migration repair --status reverted 20251225193747
npx supabase migration repair --status reverted 20251225194644
npx supabase migration repair --status reverted 20251225201313
npx supabase migration repair --status reverted 20251225202351
npx supabase migration repair --status reverted 20251225204736
npx supabase migration repair --status reverted 20251225204858
npx supabase migration repair --status reverted 20251225210039
npx supabase migration repair --status reverted 20251225210541
npx supabase migration repair --status reverted 20251225211722
npx supabase migration repair --status reverted 20251225211923
npx supabase migration repair --status reverted 20251225224825
npx supabase migration repair --status reverted 20251225225104
npx supabase migration repair --status reverted 20251225233728
npx supabase migration repair --status reverted 20251225234119
npx supabase migration repair --status reverted 20251225235755
npx supabase migration repair --status reverted 20251226004504
npx supabase migration repair --status reverted 20251226005136
npx supabase migration repair --status reverted 20251226010625
npx supabase migration repair --status reverted 20251226010914
npx supabase migration repair --status reverted 20251226011133
npx supabase migration repair --status reverted 20251226011942
npx supabase migration repair --status reverted 20251226014925
npx supabase migration repair --status reverted 20251226021057
npx supabase migration repair --status reverted 20251226021606
npx supabase migration repair --status reverted 20251226022727
npx supabase migration repair --status reverted 20251226022746
npx supabase migration repair --status reverted 20251226023431
npx supabase migration repair --status reverted 20251226025314
npx supabase migration repair --status reverted 20251226031345
npx supabase migration repair --status reverted 20251226074230
npx supabase migration repair --status reverted 20251226074833
npx supabase migration repair --status reverted 20251226075220
npx supabase migration repair --status reverted 20251226081803
npx supabase migration repair --status reverted 20251226082454
npx supabase migration repair --status reverted 20251226151057
npx supabase migration repair --status reverted 20251226152158
npx supabase migration repair --status reverted 20251226154203
npx supabase migration repair --status reverted 20251226154558
npx supabase migration repair --status reverted 20251226154711
npx supabase migration repair --status reverted 20251226160931
npx supabase migration repair --status reverted 20251226161324
npx supabase migration repair --status reverted 20251226162712
npx supabase migration repair --status reverted 20251226200937

echo "Limpiando historial aplicado..."
# Limpiamos el historial existente primero
npx supabase migration repair --status reverted 20251225133436
npx supabase migration repair --status reverted 20251225140851
npx supabase migration repair --status reverted 20251225142036
npx supabase migration repair --status reverted 20251225142357
npx supabase migration repair --status reverted 20251225152914
npx supabase migration repair --status reverted 20251225152937
npx supabase migration repair --status reverted 20251225160151
npx supabase migration repair --status reverted 20251225160619
npx supabase migration repair --status reverted 20251225171622
npx supabase migration repair --status reverted 20251225171823
npx supabase migration repair --status reverted 20251225172639
npx supabase migration repair --status reverted 20251225173614
npx supabase migration repair --status reverted 20251225173846
npx supabase migration repair --status reverted 20251225175635
npx supabase migration repair --status reverted 20251225180958
npx supabase migration repair --status reverted 20251225183112
npx supabase migration repair --status reverted 20251225185116
npx supabase migration repair --status reverted 20251225193141
npx supabase migration repair --status reverted 20251225193749
npx supabase migration repair --status reverted 20251225194645
npx supabase migration repair --status reverted 20251225201315
npx supabase migration repair --status reverted 20251225202353
npx supabase migration repair --status reverted 20251225204738
npx supabase migration repair --status reverted 20251225204859
npx supabase migration repair --status reverted 20251225210040
npx supabase migration repair --status reverted 20251225210543
npx supabase migration repair --status reverted 20251225211724
npx supabase migration repair --status reverted 20251225211924
npx supabase migration repair --status reverted 20251225224827
npx supabase migration repair --status reverted 20251225225106
npx supabase migration repair --status reverted 20251225233729
npx supabase migration repair --status reverted 20251225234121
npx supabase migration repair --status reverted 20251225235757
npx supabase migration repair --status reverted 20251226004506
npx supabase migration repair --status reverted 20251226005137
npx supabase migration repair --status reverted 20251226010627
npx supabase migration repair --status reverted 20251226010915
npx supabase migration repair --status reverted 20251226011135
npx supabase migration repair --status reverted 20251226011943
npx supabase migration repair --status reverted 20251226014927
npx supabase migration repair --status reverted 20251226021058
npx supabase migration repair --status reverted 20251226021607
npx supabase migration repair --status reverted 20251226022729
npx supabase migration repair --status reverted 20251226022747
npx supabase migration repair --status reverted 20251226023432
npx supabase migration repair --status reverted 20251226025316
npx supabase migration repair --status reverted 20251226031346
npx supabase migration repair --status reverted 20251226074232
npx supabase migration repair --status reverted 20251226074834
npx supabase migration repair --status reverted 20251226075221
npx supabase migration repair --status reverted 20251226081805
npx supabase migration repair --status reverted 20251226082455
npx supabase migration repair --status reverted 20251226151058
npx supabase migration repair --status reverted 20251226152200
npx supabase migration repair --status reverted 20251226154204
npx supabase migration repair --status reverted 20251226154600
npx supabase migration repair --status reverted 20251226154713
npx supabase migration repair --status reverted 20251226160932
npx supabase migration repair --status reverted 20251226161325
npx supabase migration repair --status reverted 20251226162714
npx supabase migration repair --status reverted 20251226200938

echo "Intentando db pull..."
npx supabase db pull
